/**
 * @noflow
 */

import AccessibilityUtil from '../AccessibilityUtil';
import StyleSheet from '../../exports/StyleSheet';
import { cssInterop } from "../../modules/cssInterop";

const emptyObject = {};
const hasOwnProperty = Object.prototype.hasOwnProperty;
const isArray = Array.isArray;

// Register web CSS interop for key components
cssInterop('Image', { className: "style" });
cssInterop('ScrollView', { className: "style" });
cssInterop('Pressable', { className: "style" });
// SafeAreaView removed intentionally

// Styles for pointerEvents
const pointerEventsStyles = {
  none: { pointerEvents: 'none' },
  boxNone: { pointerEvents: 'none' },
  boxOnly: { pointerEvents: 'auto' },
  auto: { pointerEvents: 'auto' },
};

/**
 * Create DOM props for React Native Web components
 */
const createDOMProps = (elementType, props = {}, options = {}) => {
  if (!props) return emptyObject;

  const {
    style,
    pointerEvents,
    ...rest
  } = props;

  // Merge styles, including pointerEvents if provided
  const [className, inlineStyle] = StyleSheet(
    [style, pointerEvents && pointerEventsStyles[pointerEvents]],
    { writingDirection: 'ltr', ...options }
  );

  const domProps = {
    ...rest,
    className,
    style: inlineStyle,
  };

  // Handle accessibility props
  if (props.accessibilityLabel != null) {
    domProps['aria-label'] = props.accessibilityLabel;
  }
  if (props.accessibilityRole != null) {
    domProps['role'] = AccessibilityUtil.propsToAriaRole(props.accessibilityRole);
  }

  return domProps;
};

export default createDOMProps;
